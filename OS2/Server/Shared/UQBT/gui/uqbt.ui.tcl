#! /bin/sh
# the next line restarts using expectk \
exec expectk "$0" "$@"

# interface generated by SpecTcl version 1.1 from /home/cristina/uqbt/GUI/uqbt.ui
#   root     is the parent window for this user interface

proc uqbt_ui {root args} {

	# this treats "." as a special case

	if {$root == "."} {
	    set base ""
	} else {
	    set base $root
	}
    
	frame $base.frame#4

	frame $base.frame#5

	frame $base.frame#6

	frame $base.frame#7

	frame $base.frame#8

	frame $base.frame#1

	label $base.label#1 \
		-borderwidth 4 \
		-relief ridge \
		-text {The UQBT Binary Translation Framework}
	catch {
		$base.label#1 configure \
			-font -*-Helvetica-Bold-R-Normal-*-*-240-*-*-*-*-*-*
	}

	label $base.label#7 \
		-justify right \
		-text {Input program:}

	entry $base.entry#1 \
		-textvariable fileName \
                -width 30

	button $base.button#1 \
		-command selectFile \
		-text Select...

	label $base.label#8 \
		-text {Source machine:}

	radiobutton $base.radiobutton#3 \
		-text Sparc \
		-value s \
		-variable sourceMachine \
        	-command resetAllButMachineOptions

	radiobutton $base.radiobutton#2 \
		-text Pentium \
		-value p \
		-variable sourceMachine \
        	-command resetAllButMachineOptions

	label $base.label#9 \
		-justify right \
		-text {Target machine:}

	radiobutton $base.radiobutton#4 \
		-text Sparc \
		-value s \
		-variable targetMachine \
        	-command resetAllButMachineOptions

	radiobutton $base.radiobutton#5 \
		-text Pentium \
		-value p \
		-variable targetMachine \
        	-command resetAllButMachineOptions

	radiobutton $base.radiobutton#6 \
		-text {JVM code} \
		-value j \
		-variable targetMachine \
        	-command resetAllButMachineOptions

	label $base.label#10 \
		-justify right \
		-text Options:

	checkbutton $base.checkbutton#1 \
		-justify left \
		-text {Create control flow graph} \
		-variable createCFG

	checkbutton $base.checkbutton#2 \
		-justify left \
		-text {Create call graph} \
		-variable createCallGraph

	checkbutton $base.checkbutton#3 \
		-justify left \
		-text {Create RTL code} \
		-variable createRTL

	checkbutton $base.checkbutton#4 \
		-text {Create HRTL code} \
		-variable createHRTL

	checkbutton $base.checkbutton#5 \
		-text {Create C code} \
		-variable createC

	checkbutton $base.checkbutton#6 \
		-text {Create JVM code} \
		-variable createBytecode

	button $base.button#2 \
		-command translate \
		-text Translate
	catch {
		$base.button#2 configure \
			-font -*-Helvetica-Bold-R-Normal-*-*-140-*-*-*-*-*-*
	}

	button $base.displayCFGWidget \
		-command {displayGraph "cfg"} \
		-state disabled \
		-text {Display flow graph}

	button $base.displayCallGraphWidget \
		-command {displayGraph "callGraph"} \
		-state disabled \
		-text {Display call graph}

	button $base.displayRTLWidget \
		-command {displayRtl .uqbtRTL "RTL Code"} \
		-state disabled \
		-text {Display RTL code}

	button $base.displayHRTLWidget \
		-command {displayHrtl .uqbtHrtl "HRTL code"} \
		-state disabled \
		-text {Display HRTL code}

	button $base.displayCWidget \
		-command {displayC .uqbtC "Low-level C code"} \
		-state disabled \
		-text {Display C code}

	button $base.displayBytecodeWidget \
		-command {displayBytecode .uqbtBytecode "JVM code"} \
		-state disabled \
		-text {Display JVM code}

	label $base.label#6 \
		-justify right \
		-text Run:

	entry $base.translatedFileCommandWidget \
		-cursor {} \
		-state disabled \
		-textvariable runFileName \
		-width 40

	button $base.runProgramWidget \
		-command {runProgram $runFileName} \
		-state disabled \
		-text {Run Program}
	catch {
		$base.runProgramWidget configure \
			-font -*-Helvetica-Bold-R-Normal-*-*-120-*-*-*-*-*-*
	}

	button $base.button#8 \
		-command exit \
		-text Quit

	button $base.button#10 \
		-command {displayFile .uqbtCredits Credits uqbtabout.txt} \
		-text Credits

	button $base.button#11 \
		-command {displayFile .uqbtHelp Help uqbthelp.txt} \
		-text Help


	# Geometry management

	grid $base.frame#4 -in $root	-row 3 -column 3  \
		-sticky w
	grid $base.frame#5 -in $root	-row 4 -column 3 
	grid $base.frame#6 -in $root	-row 5 -column 2  \
		-columnspan 2
	grid $base.frame#7 -in $root	-row 6 -column 3  \
		-sticky w
	grid $base.frame#8 -in $root	-row 2 -column 2  \
		-rowspan 2 \
		-sticky ne
	grid $base.frame#1 -in $root	-row 2 -column 3  \
		-sticky w
	grid $base.label#1 -in $root	-row 1 -column 1  \
		-columnspan 3
#	grid $base.uqLogo -in $root	-row 2 -column 1 
	grid $base.label#7 -in $base.frame#8	-row 1 -column 1  \
		-sticky e
	grid $base.entry#1 -in $base.frame#1	-row 1 -column 1  \
		-columnspan 2
	grid $base.button#1 -in $base.frame#1	-row 1 -column 3
        
	grid $base.label#8 -in $base.frame#8	-row 2 -column 1  \
		-sticky e
	grid $base.radiobutton#3 -in $base.frame#1	-row 2 -column 1 
	grid $base.radiobutton#2 -in $base.frame#1	-row 2 -column 2 
	grid $base.label#9 -in $base.frame#8	-row 3 -column 1  \
		-sticky e
	grid $base.radiobutton#4 -in $base.frame#1	-row 3 -column 1 
	grid $base.radiobutton#5 -in $base.frame#1	-row 3 -column 2 
	grid $base.radiobutton#6 -in $base.frame#1	-row 3 -column 3 
	grid $base.label#10 -in $base.frame#8	-row 4 -column 1  \
		-sticky e
	grid $base.walkaboutLogo -in $root	-row 3 -column 1 
	grid $base.checkbutton#1 -in $base.frame#4	-row 1 -column 1  \
		-sticky w
	grid $base.checkbutton#2 -in $base.frame#4	-row 2 -column 1  \
		-sticky w
	grid $base.checkbutton#3 -in $base.frame#4	-row 3 -column 1  \
		-sticky w
	grid $base.checkbutton#4 -in $base.frame#4	-row 4 -column 1  \
		-sticky w
	grid $base.checkbutton#5 -in $base.frame#4	-row 5 -column 1  \
		-sticky w
	grid $base.checkbutton#6 -in $base.frame#4	-row 6 -column 1  \
		-sticky w
	grid $base.button#2 -in $root	-row 4 -column 2 
	grid $base.displayCFGWidget -in $base.frame#5	-row 1 -column 1 
	grid $base.displayCallGraphWidget -in $base.frame#5	-row 1 -column 2 
	grid $base.displayRTLWidget -in $base.frame#5	-row 1 -column 3 
	grid $base.displayHRTLWidget -in $base.frame#5	-row 2 -column 1 
	grid $base.displayCWidget -in $base.frame#5	-row 2 -column 2 
	grid $base.displayBytecodeWidget -in $base.frame#5	-row 2 -column 3 
	grid $base.label#6 -in $base.frame#6	-row 1 -column 1 
	grid $base.translatedFileCommandWidget -in $base.frame#6  \
                -row 1 -column 2  \
		-columnspan 2
	grid $base.runProgramWidget -in $base.frame#6	-row 1 -column 4 
	grid $base.button#8 -in $base.frame#7	-row 1 -column 1 
	grid $base.button#10 -in $base.frame#7	-row 1 -column 2 
	grid $base.button#11 -in $base.frame#7	-row 1 -column 3 

	# Resize behavior management

	grid rowconfigure $base.frame#6 1 -weight 0 -minsize 30
	grid columnconfigure $base.frame#6 1 -weight 0 -minsize 61
	grid columnconfigure $base.frame#6 2 -weight 0 -minsize 30
	grid columnconfigure $base.frame#6 3 -weight 0 -minsize 171
	grid columnconfigure $base.frame#6 4 -weight 0 -minsize 30

	grid rowconfigure $base.frame#7 1 -weight 0 -minsize 30
	grid columnconfigure $base.frame#7 1 -weight 0 -minsize 57
	grid columnconfigure $base.frame#7 2 -weight 0 -minsize 49
	grid columnconfigure $base.frame#7 3 -weight 0 -minsize 30

	grid rowconfigure $base.frame#4 1 -weight 0 -minsize 30
	grid rowconfigure $base.frame#4 2 -weight 0 -minsize 30
	grid rowconfigure $base.frame#4 3 -weight 0 -minsize 30
	grid rowconfigure $base.frame#4 4 -weight 0 -minsize 30
	grid rowconfigure $base.frame#4 5 -weight 0 -minsize 30
	grid rowconfigure $base.frame#4 6 -weight 0 -minsize 30
	grid columnconfigure $base.frame#4 1 -weight 0 -minsize 30
	grid columnconfigure $base.frame#4 2 -weight 0 -minsize 30
	grid columnconfigure $base.frame#4 3 -weight 0 -minsize 30
	grid columnconfigure $base.frame#4 4 -weight 0 -minsize 30
	grid columnconfigure $base.frame#4 5 -weight 0 -minsize 30

	grid rowconfigure $base.frame#8 1 -weight 0 -minsize 30
	grid rowconfigure $base.frame#8 2 -weight 0 -minsize 30
	grid rowconfigure $base.frame#8 3 -weight 0 -minsize 30
	grid rowconfigure $base.frame#8 4 -weight 0 -minsize 30
	grid rowconfigure $base.frame#8 5 -weight 0 -minsize 30
	grid rowconfigure $base.frame#8 6 -weight 0 -minsize 30
	grid columnconfigure $base.frame#8 1 -weight 0 -minsize 44

	grid rowconfigure $root 1 -weight 0 -minsize 67
	grid rowconfigure $root 2 -weight 0 -minsize 24
	grid rowconfigure $root 3 -weight 0 -minsize 200
	grid rowconfigure $root 4 -weight 0 -minsize 28
	grid rowconfigure $root 5 -weight 0 -minsize 30
	grid rowconfigure $root 6 -weight 0 -minsize 30
	grid columnconfigure $root 1 -weight 0 -minsize 69
	grid columnconfigure $root 2 -weight 0 -minsize 39
	grid columnconfigure $root 3 -weight 0 -minsize 343

	grid rowconfigure $base.frame#5 1 -weight 0 -minsize 30
	grid rowconfigure $base.frame#5 2 -weight 0 -minsize 30
	grid columnconfigure $base.frame#5 1 -weight 0 -minsize 30
	grid columnconfigure $base.frame#5 2 -weight 0 -minsize 30
	grid columnconfigure $base.frame#5 3 -weight 0 -minsize 30

	grid rowconfigure $base.frame#1 1 -weight 0 -minsize 30
	grid rowconfigure $base.frame#1 2 -weight 0 -minsize 30
	grid rowconfigure $base.frame#1 3 -weight 0 -minsize 30
	grid columnconfigure $base.frame#1 1 -weight 0 -minsize 30
	grid columnconfigure $base.frame#1 2 -weight 0 -minsize 30
	grid columnconfigure $base.frame#1 3 -weight 0 -minsize 30
	grid columnconfigure $base.frame#1 4 -weight 0 -minsize 30
# additional interface code
# end additional interface code

}


# Allow interface to be run "stand-alone" for testing

catch {
    if {[info exists embed_args]} {
	# we are running in the plugin
	uqbt_ui .
    } else {
	# we are running in stand-alone mode
	if {$argv0 == [info script]} {
	    wm title . "Testing uqbt_ui"
	    uqbt_ui .
	}
    }
}
